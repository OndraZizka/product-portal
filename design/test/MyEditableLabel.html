<html>
<head>
    <script src="./jquery183.js" type="text/javascript"></script>
    <style type="text/css">
        input.editable.blur {
            border: 1px solid transparent;
            font-style: normal; /* Override italics when disabled=true. */
        }
        input.editable.focus {
            border: 1px solid silver;
        }

        input.editable.link.blur {
            color: blue;
            text-decoration: underline;
        }

        input.editable.link.focus {
            color: black;
            text-decoration: none;
        }

        input.editable.label.blur {
            background: rgb(252,255,244); /* Old browsers */
            background: -moz-linear-gradient(top,  rgba(252,255,244,1) 0%, rgba(233,233,206,1) 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(252,255,244,1)), color-stop(100%,rgba(233,233,206,1))); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  rgba(252,255,244,1) 0%,rgba(233,233,206,1) 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  rgba(252,255,244,1) 0%,rgba(233,233,206,1) 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  rgba(252,255,244,1) 0%,rgba(233,233,206,1) 100%); /* IE10+ */
            background: linear-gradient(to bottom,  rgba(252,255,244,1) 0%,rgba(233,233,206,1) 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fcfff4', endColorstr='#e9e9ce',GradientType=0 ); /* IE6-9 */
        }

        input.editable.focus {
            background: #ffffff; /* Old browsers */
            background: -moz-linear-gradient(top,  #ffffff 0%, #f6f6f6 47%, #ededed 100%); /* FF3.6+ */
            background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(47%,#f6f6f6), color-stop(100%,#ededed)); /* Chrome,Safari4+ */
            background: -webkit-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* Chrome10+,Safari5.1+ */
            background: -o-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* Opera 11.10+ */
            background: -ms-linear-gradient(top,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* IE10+ */
            background: linear-gradient(to bottom,  #ffffff 0%,#f6f6f6 47%,#ededed 100%); /* W3C */
            filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ededed',GradientType=0 ); /* IE6-9 */
        }
    </style>
    <script type="text/javascript">
        window.$ = jQuery;

        function validateURL(val){
            return val.substring(0, 7) === "http://"
                || val.substring(0, 8) === "https://"
                || val.substring(0, 6) === "ftp://";
        }

        var EditableLink = {
            activate: function(){
                $(this).removeClass('blur').addClass('focus').focus();
                this.active = true;
                this.disabled = false;
                //alert('activ');
                this.focus();
                //alert(this);
            },
            passivate: function(){
                $(this).removeClass('focus').addClass('blur');
                this.active = false;
                this.disabled = true;
                //alert('pasiv');
            },
            onclick: function(){
                if( this.active ) return;
                if(validateURL(this.value))
                    window.open(this.value, '', 'modal=true,alwaysRaised=yes');
            },
        };
    </script>
</head>
<body>

    <div>
        <input type="text" class="editable label blur"
               onfocus="$(this).removeClass('blur').addClass('focus');"
               onblur ="$(this).removeClass('focus').addClass('blur');"
               />
    </div>

    <div id="myLink" class="editable link">
        <img src="/home/ondra/Desktop/icoEdit.png" width="16" height="16" alt="Edit the link"
             onclick="EditableLink.activate.apply(
                         $(this).parent().children('input.editable.link').first().get(0)
                      );"
        >
        <input type="text" class="editable link blur"
               xonfocus="$(this).removeClass('blur').addClass('focus');"
               onblur ="EditableLink.passivate.apply(this);"
               onclick="if(validateURL(this.value)) window.open(this.value, '', 'modal=true,alwaysRaised=yes');"
               value="test2"
               />
    </div>

</body>
</html>
